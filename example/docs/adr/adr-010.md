# ADR 010 - Utilisation de la stratégie de load balancing "Least Connections"

## Statut
Acceptée

## Contexte
Étant donné que nous avons choisit d'utiliser du horizontal-scaling auprès des microservices, il faut choisir un algorithme pour distribuer la charge entre les instances déployées.

## Décision
Nous allons utiliser la stratégie "Least Connections" et "IP Hash" pour distribuer la charge entre les instances déployées.

## Conséquences
La stratégie "Least Connections" permet d'envoyer les requêtes à l'instance qui a le moins de connexion active. Cela permet d'éviter de surcharger une instance et de causer des erreurs et une latence plus élevé. Cette stratégie sera utilisé pour le matching engine et le service des instruments car ces services doivent répondre le plus rapidement possible. \

La stratégie "IP Hash" permet de toujours rediriger un même utilisateur vers la même instance. Cela est utile pour les services qui ont besoin d'établir des sessions à long terme, ce qui est le cas pour Blazor.